/* stylelint-disable */
@import '../support.scss';

$ToggleBorderWidth: 1px;

.Toggle {
    display: flex;
    height: 100%;
    position: relative;

    input {
        position: absolute;
        /* fix hover issue for ie  
        https://github.com/ComparetheMarket/meerstrap.universe/issues/3633 */
        height: 100%;
        width: 100%;
        opacity: 0;
        cursor: pointer;

        &:hover + .ToggleArea,
        &:focus + .ToggleArea {
            box-shadow: inset 0px -4px 0px $grey-720, $elevation-level-2-downwards;
        }

        &:checked + .ToggleArea {
            color: $ctm-white;
            background-color: $blue-230;
            border-color: $blue-230;
            box-shadow: inset 0 4px 0 rgba(0, 0, 0, 0.2), inset 0 0 0 $blue-350;
        }

        &:enabled:checked:hover + .ToggleArea,
        &:enabled:checked:focus + .ToggleArea {
            box-shadow: inset 0 4px 0 rgba(0, 0, 0, 0.2), inset 0 0 0 $blue-350,
                0px 4px 8px rgba(0, 0, 0, 0.24), 0px -1px 4px rgba(0, 0, 0, 0.08);
        }

        &:disabled + .ToggleArea {
            cursor: default;
            color: $grey-460;
            background-color: $grey-720;
            border-color: $grey-670;
            box-shadow: $grey-670 0px -4px 0px inset;
        }
    }

    .ToggleArea {
        display: flex;
        width: 100%;
        height: 100%;
        justify-content: center;
        align-items: flex-start;
        font-weight: bold;
        text-align: center;
        color: $blue-150;
        background-color: $ctm-white;
        border: 1px solid $blue-620;
        box-shadow: inset 0 -4px 0 $grey-720;
        border-radius: $border-radius-s;
        user-select: none;
        cursor: pointer;
        min-height: 56px;
        padding: #{$spacing-sm - $ToggleBorderWidth};

        .ToggleArea-icon {
            display: flex;
            -moz-box-pack: center;
            justify-content: center;
            fill: currentcolor;
            width: 100%;
            padding-bottom: $spacing-xs;

            svg {
                height: 48px;
                width: 48px;
                max-height: 100%;
                vertical-align: middle;
            }
        }
    }

    // Temp override for Checkbox hover
    &:hover .Checkbox {
        box-shadow: none;
    }

    .ToggleContent {
        display: flex;
        flex-direction: column;
        height: 100%;
        justify-content: center;
        width: 100%;
        order: 3;

        .ToggleContent-description {
            font-weight: normal;
            text-align: left;
        }
    }

    .ToggleContentLeft {
        text-align: left;
        justify-content: flex-start;
    }

    .Checkbox {
        margin-top: 0;
        margin-bottom: auto;
        margin-right: $spacing-sm;
        flex-shrink: 0;

        &:hover {
            box-shadow: none;
        }

        @media all and (max-width: map-get($ctm-media, 'mobile-max-width')) {
            margin-top: auto;
        }
    }
}

%WithSomething {
    .ToggleArea {
        padding: #{$spacing-xs - $ToggleBorderWidth};
        flex-direction: column;
        justify-content: flex-start;
        align-items: center;
        text-align: left;

        .Checkbox {
            order: 2;
            margin: 0 0 $spacing-xs;
        }

        .ToggleContent {
            order: 3;
            text-align: center;
        }

        @media (min-width: map-get($ctm-media, 'tablet-min-width')) {
            padding-bottom: #{$spacing-sm - $ToggleBorderWidth};
        }
    }
}

.Toggle.WithIcon {
    @extend %WithSomething;

    .ToggleArea {
        padding-left: calc(#{$spacing-xs} - #{$ToggleBorderWidth});
    
        .ToggleArea-icon {
            order: 1;
            width: auto;
            margin: 0 0 $spacing-xs;
        }
    }
}

.Toggle.WithIcon.horizontal {
    .ToggleArea {
        flex-direction: row;
        padding-left: calc(#{$spacing-sm} - #{$ToggleBorderWidth});
        padding-bottom: calc(#{$spacing-xs} - #{$ToggleBorderWidth});

        .ToggleArea-icon {
            order: 2;
            padding: 0;
            width: auto;
            margin-right: 16px;
        }

        .Checkbox {
            order: 1;
            padding: 0;
            margin: auto $spacing-sm auto 0;
        }

        .ToggleContent {
            order: 3;
            text-align: left;
        }
    }
}

.Toggle.WithImage {
    @extend %WithSomething;

    .ToggleArea {
        padding-bottom: calc(#{$spacing-sm} - #{$ToggleBorderWidth});
        
        /* fix height issue for ie 
        https://github.com/ComparetheMarket/meerstrap.universe/issues/3633 */
        align-items: stretch;

        /* fix height issue for ie 
        https://github.com/ComparetheMarket/meerstrap.universe/issues/3633 */
        .ToggleImage {
            max-width: 100%;
            margin: 0 auto $spacing-xs;
            text-align: center;
        }

        img {
            display: inline-block;
            width: auto;
            max-width: 100%;
            height: auto;
            border-radius: $border-radius-s;
        }

        img.Animated {
            display: none;
        }

        .Checkbox {
            order: 1;
            padding: 0;
            margin: auto auto $spacing-xs auto;
        }
    }

    .ToggleArea:hover,
    input:enabled:focus + .ToggleArea {
        img.Animated {
            display: inline-block;
        }
        img.Static {
            display: none;
        }
    }

    input:disabled + .ToggleArea,
    input:disabled:hover + .ToggleArea {
        img {
            filter: grayscale(100%);
        }
        img.Animated {
            display: none;
        }
        img.Static {
            display: inline-block;
        }
    }
}

.Toggle.WithImage.horizontal {
    .ToggleArea {
        flex-direction: row;
        padding-bottom: calc(#{$spacing-xs} - #{$ToggleBorderWidth});
    
        
        .Checkbox {
            order: 1;
            padding: 0;
            margin: auto $spacing-xs;
        }

        /* fix height issue for ie 
        https://github.com/ComparetheMarket/meerstrap.universe/issues/3633 */
        .ToggleImage {
            max-width: 40%;
            margin: 0 $spacing-sm 0 0;
            flex-shrink: 0;
        }

        .ToggleContent {
            justify-content: center;
        }
    }
}

.Toggle.Invalid {
    .ToggleArea {
        @include blockColor('red-720');
        border-color: $red-380;
        box-shadow: inset 0px -4px 0px $red-380;
    }

    input {
        &:enabled:not(:checked):hover + .ToggleArea,
        &:enabled:not(:checked):focus + .ToggleArea {
            box-shadow: inset 0px -4px 0px $red-380, $elevation-level-2-downwards;
        }   
    }
}
